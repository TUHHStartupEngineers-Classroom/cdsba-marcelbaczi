{
  "hash": "f21db77df6a35cfcbee2e66bcf217017",
  "result": {
    "markdown": "---\ntitle: \"Randomized Controlled Trials\"\n---\n\n\n# Assignment 1\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-1_6e699fa62def5ab98dd61bbb580cd36f'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\ndata <- readRDS(\"C:/Users/Marcel/Master/DataScience/data/abtest_online.rds\")\nhead(data)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"ip\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"chatbot\"],\"name\":[2],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"previous_visit\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"mobile_device\"],\"name\":[4],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"purchase\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"purchase_amount\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"161.88.211.70\",\"2\":\"TRUE\",\"3\":\"0\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\"},{\"1\":\"239.86.201.0\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"1\",\"6\":\"39.45626\"},{\"1\":\"35.90.22.130\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\"},{\"1\":\"219.176.193.3\",\"2\":\"FALSE\",\"3\":\"4\",\"4\":\"TRUE\",\"5\":\"0\",\"6\":\"0.00000\"},{\"1\":\"247.85.168.16\",\"2\":\"TRUE\",\"3\":\"1\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\"},{\"1\":\"120.221.249.244\",\"2\":\"TRUE\",\"3\":\"2\",\"4\":\"FALSE\",\"5\":\"0\",\"6\":\"0.00000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#View(data)\n\nggplot(data, aes(x = chatbot, y = previous_visit)) +\n  stat_summary() +\n  labs(title = \"Balance\",\n       x = \"Treatment Group\",\n       y = \"Previous Visits\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> No summary function supplied, defaulting to `mean_se()`\n```\n:::\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndata$mobile_device <- as.numeric(data$mobile_device)\n#https://stackoverflow.com/questions/30943167/replace-logical-values-true-false-with-numeric-1-0\nggplot(data, aes(x = chatbot, y = mobile_device)) +\n  stat_summary() +\n  labs(title = \"Balance\",\n       x = \"Treatment Group\",\n       y = \"Mobile Device\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> No summary function supplied, defaulting to `mean_se()`\n```\n:::\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-1-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(data, aes(x = chatbot, y = purchase)) +\n  stat_summary() +\n  labs(title = \"Balance\",\n       x = \"Treatment Group\",\n       y = \"Purchase\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> No summary function supplied, defaulting to `mean_se()`\n```\n:::\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-1-3.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(data, aes(x = chatbot, y = purchase_amount)) +\n  stat_summary() +\n  labs(title = \"Balance\",\n       x = \"Treatment Group\",\n       y = \"Purchase Amount\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> No summary function supplied, defaulting to `mean_se()`\n```\n:::\n\n::: {.cell-output-display}\n![](06_rct_files/figure-html/unnamed-chunk-1-4.png){width=672}\n:::\n:::\n\n\nThe covariates are significantly unbalanced between both groups. While the mobile-device usage is quite similliar all other covariates are different.\n\n# Assignment 2\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-2_ec1d3f4ef1a2a79f5562032d8946101b'}\n\n```{.r .cell-code}\n#Assuming it makes no difference if using True/False or 1/0\n\nlm_sales <- lm(purchase~chatbot, data=data)\nsummary(lm_sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase ~ chatbot, data = data)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -0.4960 -0.3249 -0.2679  0.5040  0.7321 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  0.49597    0.02122  23.376  < 2e-16 ***\n#> chatbotTRUE -0.22811    0.02989  -7.633 5.36e-14 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 0.4725 on 998 degrees of freedom\n#> Multiple R-squared:  0.05516,\tAdjusted R-squared:  0.05421 \n#> F-statistic: 58.26 on 1 and 998 DF,  p-value: 5.36e-14\n```\n:::\n\n```{.r .cell-code}\nlm_spent <- lm(purchase_amount~chatbot, data=data)\nsummary(lm_spent)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot, data = data)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -16.702 -14.478  -9.626  13.922  64.648 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  16.7017     0.8374  19.944  < 2e-16 ***\n#> chatbotTRUE  -7.0756     1.1796  -5.998 2.79e-09 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.65 on 998 degrees of freedom\n#> Multiple R-squared:  0.0348,\tAdjusted R-squared:  0.03383 \n#> F-statistic: 35.98 on 1 and 998 DF,  p-value: 2.787e-09\n```\n:::\n:::\n\n\nThe chatbot decreases the number of sales and the amount spent during each transaction. As the groups are not really comparable due to their unbalanced covariates this result could be wrong.\n\n# Assignment 3\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-3_764bf88e62691a3f43768b177e7fa59d'}\n\n```{.r .cell-code}\nlm_cate <- lm(purchase_amount ~ chatbot * mobile_device, data = data)\nsummary(lm_cate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_amount ~ chatbot * mobile_device, data = data)\n#> \n#> Residuals:\n#>    Min     1Q Median     3Q    Max \n#> -16.98 -14.54  -9.95  14.13  65.24 \n#> \n#> Coefficients:\n#>                           Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)                16.9797     1.0152  16.725   <2e-16 ***\n#> chatbotTRUE                -7.0301     1.4284  -4.922    1e-06 ***\n#> mobile_device              -0.8727     1.7987  -0.485    0.628    \n#> chatbotTRUE:mobile_device  -0.1526     2.5369  -0.060    0.952    \n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 18.66 on 996 degrees of freedom\n#> Multiple R-squared:  0.03534,\tAdjusted R-squared:  0.03244 \n#> F-statistic: 12.16 on 3 and 996 DF,  p-value: 8.034e-08\n```\n:::\n:::\n\n\nWhile the chatbot itself decreases the purchase_amount by a big number, it only decreases the purchase amount by a small number if used on a mobile device. But the p value is too big.\n\n# Assignment 4\n\n\n::: {.cell hash='06_rct_cache/html/unnamed-chunk-4_71635bf05432c0d9220d32973c02ca88'}\n\n```{.r .cell-code}\nlogistic_model <- glm(purchase ~ chatbot, data = data, family = binomial(link = 'logit'))\nsummary(logistic_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> glm(formula = purchase ~ chatbot, family = binomial(link = \"logit\"), \n#>     data = data)\n#> \n#> Coefficients:\n#>             Estimate Std. Error z value Pr(>|z|)    \n#> (Intercept) -0.01613    0.08981  -0.180    0.857    \n#> chatbotTRUE -0.98939    0.13484  -7.337 2.18e-13 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> (Dispersion parameter for binomial family taken to be 1)\n#> \n#>     Null deviance: 1329.1  on 999  degrees of freedom\n#> Residual deviance: 1273.3  on 998  degrees of freedom\n#> AIC: 1277.3\n#> \n#> Number of Fisher Scoring iterations: 4\n```\n:::\n:::\n\n\nHaving the chatbot decreases the log odds by 0.989 compared to the users not using the chatbot.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}